---
description: Создать документ-контракт API для фронтенда по модулю с контроллером (опциональное правило; применяется только если добавлено в запрос)
alwaysApply: false
---

# Генерация контракта API по модулю

Когда это правило добавлено в запрос, в запросе присутствует **модуль проекта** с контроллером (REST API). Нужно просканировать этот модуль и составить **документ-контракт для фронтенда** в стиле `docs/api-groups-contract.md`.

## Что сделать

1. **Просканировать модуль**  
   Найти и проанализировать контроллер(ы) и связанные DTO/запросы/ответы в указанном модуле (включая сервисы, валидацию, обработку ошибок, если доступны).

2. **Составить один документ-контракт** в формате Markdown со следующими разделами.

## Структура документа контракта

### Вводная часть
- **Заголовок**: «Контракт API: [название области]» и краткое назначение документа.
- **Общие сведения**:
  - Базовый URL и префиксы (таблица: префикс → назначение).
  - Авторизация (JWT, роли для изменения данных и чтения).
  - Типы данных в ответах (UUID, даты ISO-8601, числа, `null`).
  - Формат ошибок: единый **ErrorResponse** (поле `code`, `message`, `timestamp`, `details`) и примеры JSON для типичных кодов (например, VALIDATION_FAILED, NOT_FOUND).

### По каждому эндпоинту модуля

Для **каждого** эндпоинта из контроллера(ов) модуля описать:

1. **Цель ручки (назначение)**  
   Кратко: для чего эндпоинт нужен фронтенду (например: «постраничное получение списка учителей для выпадающего списка кураторов»).

2. **Метод и путь**  
   Например: `GET /api/account/teachers`, `POST /api/groups`.

3. **Права доступа**  
   Какие роли могут вызывать (если есть ограничения).

4. **Параметры**  
   - Path: описание параметров пути.  
   - Query: таблица (параметр, тип, обязательность, описание).  
   - Body: для POST/PUT — структура тела запроса (таблица полей: поле, тип, обязательность, описание).

5. **Успешный ответ**  
   HTTP-статус и описание тела: имя типа (DTO) и таблица полей (поле, тип, описание). Для списков — структура элемента и пагинация (например, `items`, `nextCursor`), если есть.

6. **Ошибки**  
   Все возможные ответы с ошибками: HTTP-код, код ошибки в теле (`code`), когда возникает, примеры сообщений (например: `404 NOT_FOUND` — «Group not found: &lt;id&gt;», `409 CONFLICT` — «Group with code '…' already exists»). Для валидации — указать, что в `details` приходит объект «поле → сообщение».

### В конце документа
- **Сводная таблица** кодов ошибок и HTTP-статусов (HTTP | code | когда возникает).
- **Примеры запросов и ответов** (фрагменты JSON) для основных сценариев.

## Оформление

- Использовать таблицы в Markdown для полей и параметров.
- Типы указывать явно: UUID, string, integer, array of X, object (ИмяDto), string \| null и т.д.
- Переиспользуемые DTO описывать один раз (например, «Модель данных X») и по ссылке указывать «объект **X**».
- Группировать эндпоинты по смыслу (разделы с подзаголовками), как в примере: «Выбор куратора», «Студенческие группы (CRUD)», «Состав группы», «Старосты», «Оверрайды» и т.д.

## Эталон формата

За образец структуры и стиля брать документ **`docs/api-groups-contract.md`**: общие сведения, разбивка по разделам, таблицы полей, описание ошибок, примеры — повторять этот уровень детализации и оформления.

Итоговый контракт сохранять в `docs/` с именем вида `api-<модуль>-contract.md` (или как укажет пользователь).

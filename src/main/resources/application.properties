spring.application.name=interhubdev

# Server
server.port=8080

# Docker Compose (отключить если Docker не нужен или уже запущен вручную)
spring.docker.compose.enabled=false

# Database
spring.datasource.url=jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:interhubdev}
spring.datasource.username=${DB_USER:interhubdev}
spring.datasource.password=${DB_PASSWORD:interhubdev}
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA / Hibernate
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.open-in-view=false

# Flyway
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true

# JWT Authentication
jwt.secret=${JWT_SECRET:default-secret-key-for-development-only-change-in-production-min-32-chars}

# Access Token (short-lived, carried in cookie)
jwt.access.expiration=${JWT_ACCESS_EXPIRATION:900000}
jwt.access.cookie-name=access_token

# Refresh Token (long-lived, stored in DB)
jwt.refresh.expiration=${JWT_REFRESH_EXPIRATION:604800000}
jwt.refresh.cookie-name=refresh_token

# Cookie Security Settings
jwt.cookie.secure=${JWT_COOKIE_SECURE:false}
jwt.cookie.same-site=Strict
jwt.cookie.domain=${JWT_COOKIE_DOMAIN:}
jwt.cookie.path=/api

# Rate limit (general, per IP)
jwt.rate-limit.max-requests-per-second=${RATE_LIMIT_MAX_REQUESTS:50}
jwt.rate-limit.window-ms=${RATE_LIMIT_WINDOW_MS:1000}
jwt.rate-limit.cleanup-after-inactive-ms=${RATE_LIMIT_CLEANUP_MS:60000}

# Login rate limit (failed attempts per IP)
jwt.login-rate-limit.max-attempts=${LOGIN_RATE_LIMIT_MAX_ATTEMPTS:5}
jwt.login-rate-limit.window-minutes=${LOGIN_RATE_LIMIT_WINDOW_MINUTES:15}

# Security headers
jwt.security-headers.frame-options=${SECURITY_FRAME_OPTIONS:DENY}
jwt.security-headers.content-type-options=${SECURITY_CONTENT_TYPE_OPTIONS:nosniff}
jwt.security-headers.hsts-max-age-seconds=${SECURITY_HSTS_MAX_AGE:0}
jwt.security-headers.hsts-include-subdomains=${SECURITY_HSTS_INCLUDE_SUBDOMAINS:true}

# Mail (Spring Mail / SMTP)
# Port 587 = STARTTLS (default). Port 465 = SSL: set MAIL_PORT=465, MAIL_USE_SSL=true, MAIL_USE_STARTTLS=false
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME:}
spring.mail.password=${MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=${MAIL_USE_STARTTLS:true}
spring.mail.properties.mail.smtp.starttls.required=${MAIL_USE_STARTTLS:true}
spring.mail.properties.mail.smtp.ssl.enable=${MAIL_USE_SSL:false}
spring.mail.properties.mail.smtp.ssl.trust=${MAIL_HOST:smtp.gmail.com}
spring.mail.properties.mail.smtp.connectiontimeout=10000
spring.mail.properties.mail.smtp.timeout=10000

# Email Module Configuration
app.email.from=${MAIL_FROM:noreply@interhubdev.com}
app.email.from-name=${MAIL_FROM_NAME:InterHubDev}
app.email.enabled=${MAIL_ENABLED:true}
app.email.log-only=${MAIL_LOG_ONLY:false}
app.email.base-url=${APP_BASE_URL:http://localhost:3000}

# Actuator
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized

# OpenAPI / Swagger
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html

# Spring Modulith
spring.modulith.events.jdbc.schema-initialization.enabled=true

# Bootstrap SUPER_ADMIN (created on application startup)
app.admin.email=${ADMIN_EMAIL:admin@interhubdev.com}
app.admin.password=${ADMIN_PASSWORD:}
app.admin.first-name=${ADMIN_FIRST_NAME:Super}
app.admin.last-name=${ADMIN_LAST_NAME:Admin}

# Invitation Module Configuration
app.invitation.expiry-duration=${INVITATION_EXPIRY_DAYS:90d}
app.invitation.token-expiry-duration=${INVITATION_TOKEN_EXPIRY_HOURS:24h}
app.invitation.max-email-attempts=${INVITATION_MAX_EMAIL_ATTEMPTS:3}
app.invitation.retry-delay-seconds=${INVITATION_RETRY_DELAY:60}
app.invitation.base-url=${APP_BASE_URL:http://localhost:3000}
